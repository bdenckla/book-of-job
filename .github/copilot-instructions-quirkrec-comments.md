<!-- Initially generated by GitHub Copilot. -->
# Procedure: Adding or Updating Quirkrec Comments

This describes how to add or update comments on quirkrec entries
(the Python dicts in `pyauthor_qr/qr_XXXX.py` files).

## Where comments live

Each quirkrec dict can have these comment fields:

- **`qr-generic-comment`** — the main comment. Can be a plain string
  or a list of strings (which get concatenated). This is the primary
  place to discuss observations about μL, μA, or any other codex.
- **`qr-bhq-comment`** — commentary specifically about $BHQ's treatment.
  Same string-or-list-of-strings format.

## When to use `qr-generic-comment`

Use the generic comment to note observations about codex readings,
including comparisons between μA (Aleppo Codex) and μL (Leningrad Codex).
For example, if a GitHub issue says "note that in μA, as in μL, evidence
of מקף is minimal," add a sentence like:

```python
" In μA, as in μL, evidence of מקף is minimal.",
```

to the `qr-generic-comment` list.

## Procedure

1. **Find the quirkrec file.** Files are named `pyauthor_qr/qr_XXYY.py`
   where XX is the chapter (zero-padded) and YY is the verse. Some verses
   have multiple quirkrecs, distinguished by suffixes
   (e.g., `qr_0816_HVA.py`, `qr_0816_YNQFV.py`).

2. **Read the file** to see the existing comment style and content.

3. **Edit the comment.** If `qr-generic-comment` is a list of strings,
   add a new string element. If it is a plain string, consider converting
   it to a list if the comment is getting long. Preserve all existing
   Unicode characters exactly (see main instructions on Unicode).

4. **For long or multi-part comments,** extract them into a module-level
   variable (e.g., `_COMMENT_2702`) and reference it from the dict.
   This is already the convention for comments spanning multiple lines.

5. **Run the generation script** to rebuild the HTML output:
   ```
   python main_gen_misc_authored_english_documents.py
   ```

6. **Verify** the output is correct:
   ```
   git status --porcelain docs/
   ```
   Inspect the changed HTML to confirm the comment appears as expected.

7. **View in browser** using a local HTTP server (needed for fragment
   anchors):
   ```powershell
   # Start server if not already running:
   python -m http.server 8471 --directory docs

   # Open the quirkrec detail page:
   Start-Process "http://localhost:8471/jobn/job1_full_list_details.html#row-XXYY"
   ```

## Style conventions

- Comments are prose sentences, joined by concatenation of list elements.
- Use `μA` and `μL` (with Greek mu) for codex abbreviations, not
  spelled-out names.
- Use `$BHQ`, `$DM`, `$MAM` for source sigla (the `$` is expanded
  during rendering).
- Hebrew words and marks (מקף, דגש, דחי, etc.) should use actual
  Hebrew Unicode, not transliterations.
- When a list element continues a sentence from the previous element,
  start it with a space: `" continuation of sentence."`.
- Use `#` on its own line within a list to create a visual paragraph
  break in the source without affecting the rendered output.
