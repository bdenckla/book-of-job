<!-- Initially generated by GitHub Copilot. -->
# Procedure: Leningrad Image Scaling

When a Leningrad (μL) image is noticeably taller than the corresponding
Aleppo (μA) image on a detail page, we scale down the Lenin image so its
displayed height matches the Aleppo image's native height.

## How it works

- Scale factors are stored in `LENIN_IMG_SCALE` in
  `pyauthor_util/lenin_img_too_tall.py` as a `dict[str, float]` mapping
  SID → scale factor.
- At HTML generation time, `para_for_img()` in `pyauthor_util/author.py`
  reads the Lenin image's actual pixel dimensions, multiplies by the
  scale factor, and emits `style="width:Wpx;height:Hpx"` on the `<img>`
  tag.
- SIDs not in the dict get no scaling (displayed at natural size).

## Procedure for matching heights

1. **Get the native dimensions** of both images:
   ```powershell
   $env:PYTHONIOENCODING="utf-8"
   .venv\Scripts\python.exe -c "from PIL import Image; a=Image.open('docs/jobn/img/Aleppo/Aleppo-{SID}.png'); l=Image.open('docs/jobn/img/Lenin/Lenin-{SID}.png'); print(f'Aleppo: {a.size[0]}x{a.size[1]}'); print(f'Lenin:  {l.size[0]}x{l.size[1]}'); print(f'Scale:  {a.size[1]/l.size[1]:.4f}')"
   ```

2. **Set the scale factor** in `pyauthor_util/lenin_img_too_tall.py`:
   ```python
   "SID": 0.XXXX,  # height-match with Aleppo
   ```
   Use 3–4 significant digits (e.g. `0.527`, `0.574`).

3. **Rebuild HTML:**
   ```powershell
   .venv\Scripts\python.exe ./main_gen_misc_authored_english_documents.py
   ```

4. **Open the detail page** to verify:
   ```powershell
   Start-Process "C:\Users\BenDe\GitRepos\book-of-job\docs\jobn-details\{SID}.html"
   ```

## Notes

- The default scale factor `0.6` was originally applied to all SIDs
  whose Lenin image was more than 1.5× as tall as the Aleppo image.
  These bulk entries can be refined to exact height-matching values
  as needed.
- CSS percentage-based scaling (`width:60%`) does **not** work for this
  purpose — CSS percentages on `<img>` are relative to the containing
  block, not the image's intrinsic size. Pixel values are required.
